window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"context_data",page_location:init.context.document.location.href,page_referrer:init.context.document.referrer,page_title:init.context.document.title,page_path:init.context.document.location.pathname,search_param:init.context.document.location.search,hash_param:init.context.document.location.hash,language:init.context.navigator.language,screen_width:init.context.window.outerWidth,screen_height:init.context.window.outerHeight,user_agent:init.context.navigator.userAgent});

//--------------------------Put You GTM Code below-------------------------------
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-XXXXXXXX');
//-------------------------------------------------------------------------------
//Mention the ads platform you want to track for in the below array.Example - ['Facebook','Snapchat'...]
var trackingPlatform = ["Facebook", "Pinterest", "Snapchat"];
//-------------------------------------------------------------------------------

var trackingPlatform=["Facebook","Pinterest","Snapchat"];var page_view_fired=!1,checkout_contact_info_submitted_fired=!1,checkout_address_info_submitted_fired=!1,checkout_shipping_info_submitted_fired=!1,customerData={};function contextData(){let t,e,a;for(let d=0;d<window.dataLayer.length;d++)
if("context_data"===window.dataLayer[d].event){delete(a=JSON.parse(JSON.stringify(e=window.dataLayer[d])))["gtm.uniqueEventId"],delete a.event,t=a;break}
return t}
null!==init.data.customer&&void 0!==init.data.customer.id?window.dataLayer.push({event:"loggedIn_userData",loggedInUser_id:init.data.customer.id,loggedInUser_email:init.data.customer.email,loggedInUser_phone:init.data.customer.phone,loggedInUser_firstName:init.data.customer.firstName,loggedInUser_lastName:init.data.customer.lastName,loggedInUser_ordersCount:init.data.customer.ordersCount}):window.dataLayer.push({event:"loggedIn_userData"}),analytics.subscribe("page_viewed",t=>{if(!page_view_fired){var e=contextData()||{},a={event:"sld_page_view",client_id:t.clientId,event_time:t.timestamp,event_time_seconds:Math.round(new Date(t.timestamp)/1e3),event_source:"custom_pixel"};window.dataLayer.push({...a,...e})}
page_view_fired=!0}),analytics.subscribe("product_viewed",t=>{var e=contextData()||{},a={event:"sld_view_item",client_id:t.clientId,event_time:t.timestamp,event_time_seconds:Math.round(new Date(t.timestamp)/1e3),event_source:"custom_pixel",product_variant_id:[t.data.productVariant.id],product_sku:[t.data.productVariant.sku],ecommerce:{currency:t.data.productVariant.price.currencyCode,value:t.data.productVariant.price.amount,items:[{item_id:t.data.productVariant.product.id,item_name:t.data.productVariant.product.title,item_brand:t.data.productVariant.product.vendor,item_category:t.data.productVariant.product.type,item_variant_id:t.data.productVariant.id,item_sku:t.data.productVariant.sku,item_variant:t.data.productVariant.title?t.data.productVariant.title:"",price:t.data.productVariant.price.amount,quantity:1},]}};trackingPlatform.filter(t=>t.toLowerCase().includes("pinterest")).length>0&&(a.pt_browser_side={value:t.data.productVariant.price.amount,order_quantity:1,currency:t.data.productVariant.price.currencyCode,line_items:[{product_name:t.data.productVariant.product.title,product_id:t.data.productVariant.product.id,product_variant_id:t.data.productVariant.id,product_category:t.data.productVariant.product.type,product_brand:t.data.productVariant.product.vendor?t.data.productVariant.product.vendor:"",product_price:t.data.productVariant.price.amount,product_quantity:1},]}),trackingPlatform.filter(t=>t.toLowerCase().includes("snapchat")).length>0&&(a.snap_browser_side={price:t.data.productVariant.price.amount,currency:t.data.productVariant.price.currencyCode,item_ids:[t.data.productVariant.product.id],item_category:t.data.productVariant.product.type,brands:[t.data.productVariant.product.vendor].includes("")?"":[t.data.productVariant.product.vendor]}),trackingPlatform.filter(t=>t.toLowerCase().includes("facebook")).length>0&&(a.fb_browser_side={content_ids:[t.data.productVariant.product.id],content_category:t.data.productVariant.product.type,content_name:t.data.productVariant.product.title,content_type:"product",contents:[{id:t.data.productVariant.product.id,quantity:1,item_price:t.data.productVariant.price.amount},],currency:t.data.productVariant.price.currencyCode,value:t.data.productVariant.price.amount}),dataLayer.push({ecommerce:null,pt_browser_side:null,snap_browser_side:null,fb_browser_side:null}),window.dataLayer.push({...a,...e})}),analytics.subscribe("product_added_to_cart",t=>{var e=contextData()||{},a={event:"sld_add_to_cart",client_id:t.clientId,event_time:t.timestamp,event_time_seconds:Math.round(new Date(t.timestamp)/1e3),event_source:"custom_pixel",product_variant_id:[t.data.cartLine.merchandise.id],product_sku:[t.data.cartLine.merchandise.sku],ecommerce:{currency:t.data.cartLine.cost.totalAmount.currencyCode,value:t.data.cartLine.cost.totalAmount.amount,items:[{item_id:t.data.cartLine.merchandise.product.id,item_name:t.data.cartLine.merchandise.product.title,item_brand:t.data.cartLine.merchandise.product.vendor,item_category:t.data.cartLine.merchandise.product.type,item_variant_id:t.data.cartLine.merchandise.id,item_sku:t.data.cartLine.merchandise.sku,item_variant:t.data.cartLine.merchandise.title?t.data.cartLine.merchandise.title:"",price:t.data.cartLine.merchandise.price.amount,quantity:t.data.cartLine.quantity},]}};trackingPlatform.filter(t=>t.toLowerCase().includes("facebook")).length>0&&(a.fb_browser_side={content_ids:[t.data.cartLine.merchandise.product.id],content_category:t.data.cartLine.merchandise.product.type,content_name:t.data.cartLine.merchandise.product.title,content_type:"product",contents:[{id:t.data.cartLine.merchandise.product.id,quantity:t.data.cartLine.quantity,item_price:t.data.cartLine.merchandise.price.amount},],currency:t.data.cartLine.cost.totalAmount.currencyCode,value:t.data.cartLine.cost.totalAmount.amount}),trackingPlatform.filter(t=>t.toLowerCase().includes("pinterest")).length>0&&(a.pt_browser_side={value:t.data.cartLine.cost.totalAmount.amount,order_quantity:t.data.cartLine.quantity,currency:t.data.cartLine.cost.totalAmount.currencyCode,line_items:[{product_name:t.data.cartLine.merchandise.product.title,product_id:t.data.cartLine.merchandise.product.id,product_variant_id:t.data.cartLine.merchandise.id,product_category:t.data.cartLine.merchandise.product.type,product_brand:t.data.cartLine.merchandise.product.vendor?t.data.cartLine.merchandise.product.vendor:"",product_price:t.data.cartLine.merchandise.price.amount,product_quantity:t.data.cartLine.quantity},]}),trackingPlatform.filter(t=>t.toLowerCase().includes("snapchat")).length>0&&(a.snap_browser_side={price:t.data.cartLine.cost.totalAmount.amount,currency:t.data.cartLine.cost.totalAmount.currencyCode,item_ids:[t.data.cartLine.merchandise.product.id],item_category:t.data.cartLine.merchandise.product.type,brands:[t.data.cartLine.merchandise.product.vendor].includes("")?"":[t.data.cartLine.merchandise.product.vendor]}),dataLayer.push({ecommerce:null,pt_browser_side:null,snap_browser_side:null,fb_browser_side:null}),window.dataLayer.push({...a,...e})}),analytics.subscribe("product_removed_from_cart",t=>{var e=contextData()||{},a={event:"sld_remove_from_cart",client_id:t.clientId,event_time:t.timestamp,event_time_seconds:Math.round(new Date(t.timestamp)/1e3),event_source:"custom_pixel",product_variant_id:[t.data.cartLine.merchandise.id],product_sku:[t.data.cartLine.merchandise.sku],ecommerce:{currency:t.data.cartLine.cost.totalAmount.currencyCode,value:t.data.cartLine.cost.totalAmount.amount,items:[{item_id:t.data.cartLine.merchandise.product.id,item_name:t.data.cartLine.merchandise.product.title?t.data.cartLine.merchandise.product.title:t.data.cartLine.merchandise.product.untranslatedTitle,item_brand:t.data.cartLine.merchandise.product.vendor,item_category:t.data.cartLine.merchandise.product.type,item_variant_id:t.data.cartLine.merchandise.id,item_sku:t.data.cartLine.merchandise.sku,item_variant:t.data.cartLine.merchandise.title?t.data.cartLine.merchandise.title:"",price:t.data.cartLine.merchandise.price.amount,quantity:t.data.cartLine.quantity},]}};trackingPlatform.filter(t=>t.toLowerCase().includes("facebook")).length>0&&(a.fb_browser_side={content_ids:[t.data.cartLine.merchandise.product.id],content_category:t.data.cartLine.merchandise.product.type,content_name:t.data.cartLine.merchandise.product.title?t.data.cartLine.merchandise.product.title:t.data.cartLine.merchandise.product.untranslatedTitle,content_type:"product",contents:[{id:t.data.cartLine.merchandise.product.id,quantity:t.data.cartLine.quantity,item_price:t.data.cartLine.merchandise.price.amount},],currency:t.data.cartLine.cost.totalAmount.currencyCode,value:t.data.cartLine.cost.totalAmount.amount}),trackingPlatform.filter(t=>t.toLowerCase().includes("pinterest")).length>0&&(a.pt_browser_side={value:t.data.cartLine.cost.totalAmount.amount,order_quantity:t.data.cartLine.quantity,currency:t.data.cartLine.cost.totalAmount.currencyCode,line_items:[{product_name:t.data.cartLine.merchandise.product.title?t.data.cartLine.merchandise.product.title:t.data.cartLine.merchandise.product.untranslatedTitle,product_id:t.data.cartLine.merchandise.product.id,product_variant_id:t.data.cartLine.merchandise.id,product_category:t.data.cartLine.merchandise.product.type,product_brand:t.data.cartLine.merchandise.product.vendor?t.data.cartLine.merchandise.product.vendor:"",product_price:t.data.cartLine.merchandise.price.amount,product_quantity:t.data.cartLine.quantity},]}),trackingPlatform.filter(t=>t.toLowerCase().includes("snapchat")).length>0&&(a.snap_browser_side={price:t.data.cartLine.cost.totalAmount.amount,currency:t.data.cartLine.cost.totalAmount.currencyCode,item_ids:[t.data.cartLine.merchandise.product.id],item_category:t.data.cartLine.merchandise.product.type,brands:[t.data.cartLine.merchandise.product.vendor].includes("")?"":[t.data.cartLine.merchandise.product.vendor]}),dataLayer.push({ecommerce:null,pt_browser_side:null,snap_browser_side:null,fb_browser_side:null}),window.dataLayer.push({...a,...e})}),analytics.subscribe("cart_viewed",t=>{var e,a,d,c,i,r,o,n,s,u=contextData()||{},p={};if(null!==t.data.cart){var l=t.data.cart.lines,h=l.map(t=>{var e;return{item_id:t.merchandise.product.id,item_name:t.merchandise.product.title,item_brand:t.merchandise.product.vendor,item_category:t.merchandise.product.type,item_variant_id:t.merchandise.id,item_sku:t.merchandise.sku,item_variant:t.merchandise.title?t.merchandise.title:"",price:t.merchandise.price.amount,quantity:t.quantity}});r=l.map(t=>{var e;return{product_id:t.merchandise.product.id,product_name:t.merchandise.product.title,product_variant_id:t.merchandise.id,product_brand:t.merchandise.product.vendor?t.merchandise.product.vendor:"",product_category:t.merchandise.product.type,product_price:t.merchandise.price.amount,product_quantity:t.quantity}}),s=l.map(t=>t.merchandise.sku),n=l.map(t=>t.merchandise.id),a=l.map(t=>t.merchandise.product.id),d=l.map(t=>t.merchandise.product.type).includes("")?"":l.map(t=>t.merchandise.product.type).join(),o=l.map(t=>t.merchandise.product.vendor?t.merchandise.product.vendor:"").includes("")?"":l.map(t=>t.merchandise.product.vendor),c=l.map(t=>t.merchandise.product.title).join(),i=l.map(t=>{var e;return{id:t.merchandise.product.id,quantity:t.quantity,item_price:t.merchandise.price.amount}}),p.currency=t.data.cart.cost.totalAmount.currencyCode,p.value=t.data.cart.cost.totalAmount.amount,p.items=h}
e={event:"sld_view_cart",client_id:t.clientId,event_time:t.timestamp,event_time_seconds:Math.round(new Date(t.timestamp)/1e3),event_source:"custom_pixel",product_variant_id:n,product_sku:s,itemTotalQuantity:t.data.cart.totalQuantity,ecommerce:p},trackingPlatform.filter(t=>t.toLowerCase().includes("facebook")).length>0&&(e.fb_browser_side={content_ids:a,content_category:d,content_name:c,content_type:"product",contents:i,currency:t.data.cart.cost.totalAmount.currencyCode,value:t.data.cart.cost.totalAmount.amount,num_items:t.data.cart.totalQuantity}),trackingPlatform.filter(t=>t.toLowerCase().includes("pinterest")).length>0&&(e.pt_browser_side={value:t.data.cart.cost.totalAmount.amount,order_quantity:t.data.cart.totalQuantity,currency:t.data.cart.cost.totalAmount.currencyCode,line_items:r}),trackingPlatform.filter(t=>t.toLowerCase().includes("snapchat")).length>0&&(e.snap_browser_side={price:t.data.cart.cost.totalAmount.amount,currency:t.data.cart.cost.totalAmount.currencyCode,item_ids:a,item_category:d,brands:o,number_items:t.data.cart.totalQuantity}),dataLayer.push({ecommerce:null,pt_browser_side:null,snap_browser_side:null,fb_browser_side:null}),window.dataLayer.push({...e,...u})}),analytics.subscribe("checkout_started",t=>{var e,a,d,c,i,r,o,n,s,u,p=contextData()||{},l={};if(null!==t.data.checkout){var h=t.data.checkout.lineItems,m=h.map(t=>{var e;return{item_id:t.variant.product.id,item_name:t.variant.product.title,item_brand:t.variant.product.vendor,item_category:t.variant.product.type,item_variant_id:t.variant.id,item_sku:t.variant.sku,item_variant:t.variant.title?t.variant.title:"",price:t.variant.price.amount,coupon:t.discountAllocations.length>0?t.discountAllocations[0].discountApplication.title:"",quantity:t.quantity}});o=h.map(t=>{var e;return{product_id:t.variant.product.id,product_name:t.variant.product.title,product_variant_id:t.variant.id,product_brand:t.variant.product.vendor?t.variant.product.vendor:"",product_category:t.variant.product.type,product_price:t.variant.price.amount,product_quantity:t.quantity}}),u=h.map(t=>void 0===t.variant.sku?"":t.variant.sku),s=h.map(t=>t.variant.id),a=h.map(t=>t.variant.product.id),d=h.map(t=>t.variant.product.type).includes("")?"":h.map(t=>t.variant.product.type).join(),n=h.map(t=>t.variant.product.vendor?t.variant.product.vendor:"").includes("")?"":h.map(t=>t.variant.product.vendor),c=h.map(t=>t.variant.product.title).join(),i=h.map(t=>{var e;return{id:t.variant.product.id,quantity:t.quantity,item_price:t.variant.price.amount}}),r=h.reduce((t,e)=>t+=e.quantity,0),l.currency=t.data.checkout.currencyCode,l.value=t.data.checkout.totalPrice.amount,l.coupon=t.data.checkout.discountApplications.length>0?t.data.checkout.discountApplications[0].title:"",l.items=m}
e={event:"sld_begin_checkout",client_id:t.clientId,event_time:t.timestamp,event_time_seconds:Math.round(new Date(t.timestamp)/1e3),event_source:"custom_pixel",product_variant_id:s,product_sku:u,itemTotalQuantity:r,total_tax:t.data.checkout.totalTax.amount,subTotal_price:t.data.checkout.subtotalPrice.amount,shipping:t.data.checkout.shippingLine.price.amount?t.data.checkout.shippingLine.price.amount:"",transaction_id:t.data.checkout.order.id?t.data.checkout.order.id:"",email:t.data.checkout.email?t.data.checkout.email:"",phone:t.data.checkout.phone?t.data.checkout.phone:"",customer_address_Line1:t.data.checkout.shippingAddress.address1?t.data.checkout.shippingAddress.address1:t.data.checkout.billingAddress.address1,customer_address_Line2:t.data.checkout.shippingAddress.address2?t.data.checkout.shippingAddress.address2:t.data.checkout.billingAddress.address2,customer_city:t.data.checkout.shippingAddress.city?t.data.checkout.shippingAddress.city:t.data.checkout.billingAddress.city,customer_country:t.data.checkout.shippingAddress.country?t.data.checkout.shippingAddress.country:t.data.checkout.billingAddress.country,customer_countryCode:t.data.checkout.shippingAddress.countryCode?t.data.checkout.shippingAddress.countryCode:t.data.checkout.billingAddress.countryCode,customer_firstName:t.data.checkout.shippingAddress.firstName?t.data.checkout.shippingAddress.firstName:t.data.checkout.billingAddress.firstName,customer_lastName:t.data.checkout.shippingAddress.lastName?t.data.checkout.shippingAddress.lastName:t.data.checkout.billingAddress.lastName,customer_phoneNo:t.data.checkout.shippingAddress.phone?t.data.checkout.shippingAddress.phone:t.data.checkout.billingAddress.phone,customer_state:t.data.checkout.shippingAddress.province?t.data.checkout.shippingAddress.province:t.data.checkout.billingAddress.province,customer_stateCode:t.data.checkout.shippingAddress.provinceCode?t.data.checkout.shippingAddress.provinceCode:t.data.checkout.billingAddress.provinceCode,customer_zip:t.data.checkout.shippingAddress.zip?t.data.checkout.shippingAddress.zip:t.data.checkout.billingAddress.zip,ecommerce:l},trackingPlatform.filter(t=>t.toLowerCase().includes("facebook")).length>0&&(e.fb_browser_side={content_ids:a,content_category:d,content_name:c,content_type:"product",contents:i,currency:t.data.checkout.currencyCode,value:t.data.checkout.totalPrice.amount,num_items:r}),trackingPlatform.filter(t=>t.toLowerCase().includes("pinterest")).length>0&&(e.pt_browser_side={value:t.data.checkout.totalPrice.amount,order_quantity:r,currency:t.data.checkout.currencyCode,line_items:o}),trackingPlatform.filter(t=>t.toLowerCase().includes("snapchat")).length>0&&(e.snap_browser_side={price:t.data.checkout.totalPrice.amount,currency:t.data.checkout.currencyCode,item_ids:a,item_category:d,brands:n,number_items:r,payment_info_available:1}),dataLayer.push({ecommerce:null,pt_browser_side:null,snap_browser_side:null,fb_browser_side:null}),window.dataLayer.push({...e,...p})}),analytics.subscribe("checkout_contact_info_submitted",t=>{if(!checkout_contact_info_submitted_fired){var e,a,d,c,i,r,o,n,s,u,p=contextData()||{},l={};if(null!==t.data.checkout){var h=t.data.checkout.lineItems,m=h.map(t=>{var e;return{item_id:t.variant.product.id,item_name:t.variant.product.title,item_brand:t.variant.product.vendor,item_category:t.variant.product.type,item_variant_id:t.variant.id,item_sku:t.variant.sku,item_variant:t.variant.title?t.variant.title:"",price:t.variant.price.amount,coupon:t.discountAllocations.length>0?t.discountAllocations[0].discountApplication.title:"",quantity:t.quantity}});o=h.map(t=>{var e;return{product_id:t.variant.product.id,product_name:t.variant.product.title,product_variant_id:t.variant.id,product_brand:t.variant.product.vendor?t.variant.product.vendor:"",product_category:t.variant.product.type,product_price:t.variant.price.amount,product_quantity:t.quantity}}),u=h.map(t=>void 0===t.variant.sku?"":t.variant.sku),s=h.map(t=>t.variant.id),a=h.map(t=>t.variant.product.id),d=h.map(t=>t.variant.product.type).includes("")?"":h.map(t=>t.variant.product.type).join(),n=h.map(t=>t.variant.product.vendor?t.variant.product.vendor:"").includes("")?"":h.map(t=>t.variant.product.vendor),c=h.map(t=>t.variant.product.title).join(),i=h.map(t=>{var e;return{id:t.variant.product.id,quantity:t.quantity,item_price:t.variant.price.amount}}),r=h.reduce((t,e)=>t+=e.quantity,0),l.currency=t.data.checkout.currencyCode,l.value=t.data.checkout.totalPrice.amount,l.coupon=t.data.checkout.discountApplications.length>0?t.data.checkout.discountApplications[0].title:"",l.items=m}
e={event:"sld_checkout_contact_info_submitted",client_id:t.clientId,event_time:t.timestamp,event_time_seconds:Math.round(new Date(t.timestamp)/1e3),event_source:"custom_pixel",product_variant_id:s,product_sku:u,itemTotalQuantity:r,total_tax:t.data.checkout.totalTax.amount,subTotal_price:t.data.checkout.subtotalPrice.amount,shipping:t.data.checkout.shippingLine.price.amount?t.data.checkout.shippingLine.price.amount:"",transaction_id:t.data.checkout.order.id?t.data.checkout.order.id:"",email:t.data.checkout.email?t.data.checkout.email:"",phone:t.data.checkout.phone?t.data.checkout.phone:"",customer_address_Line1:t.data.checkout.shippingAddress.address1?t.data.checkout.shippingAddress.address1:t.data.checkout.billingAddress.address1,customer_address_Line2:t.data.checkout.shippingAddress.address2?t.data.checkout.shippingAddress.address2:t.data.checkout.billingAddress.address2,customer_city:t.data.checkout.shippingAddress.city?t.data.checkout.shippingAddress.city:t.data.checkout.billingAddress.city,customer_country:t.data.checkout.shippingAddress.country?t.data.checkout.shippingAddress.country:t.data.checkout.billingAddress.country,customer_countryCode:t.data.checkout.shippingAddress.countryCode?t.data.checkout.shippingAddress.countryCode:t.data.checkout.billingAddress.countryCode,customer_firstName:t.data.checkout.shippingAddress.firstName?t.data.checkout.shippingAddress.firstName:t.data.checkout.billingAddress.firstName,customer_lastName:t.data.checkout.shippingAddress.lastName?t.data.checkout.shippingAddress.lastName:t.data.checkout.billingAddress.lastName,customer_phoneNo:t.data.checkout.shippingAddress.phone?t.data.checkout.shippingAddress.phone:t.data.checkout.billingAddress.phone,customer_state:t.data.checkout.shippingAddress.province?t.data.checkout.shippingAddress.province:t.data.checkout.billingAddress.province,customer_stateCode:t.data.checkout.shippingAddress.provinceCode?t.data.checkout.shippingAddress.provinceCode:t.data.checkout.billingAddress.provinceCode,customer_zip:t.data.checkout.shippingAddress.zip?t.data.checkout.shippingAddress.zip:t.data.checkout.billingAddress.zip,ecommerce:l},trackingPlatform.filter(t=>t.toLowerCase().includes("facebook")).length>0&&(e.fb_browser_side={content_ids:a,content_category:d,content_name:c,content_type:"product",contents:i,currency:t.data.checkout.currencyCode,value:t.data.checkout.totalPrice.amount,num_items:r}),trackingPlatform.filter(t=>t.toLowerCase().includes("pinterest")).length>0&&(e.pt_browser_side={value:t.data.checkout.totalPrice.amount,order_quantity:r,currency:t.data.checkout.currencyCode,line_items:o}),trackingPlatform.filter(t=>t.toLowerCase().includes("snapchat")).length>0&&(e.snap_browser_side={price:t.data.checkout.totalPrice.amount,currency:t.data.checkout.currencyCode,item_ids:a,item_category:d,brands:n,number_items:r,payment_info_available:1}),dataLayer.push({ecommerce:null,pt_browser_side:null,snap_browser_side:null,fb_browser_side:null}),window.dataLayer.push({...e,...p})}
checkout_contact_info_submitted_fired=!0}),analytics.subscribe("click",t=>{window.dataLayer.push(t.customData)}),analytics.subscribe("scroll_depth",t=>{window.dataLayer.push(t.customData)}),analytics.subscribe("checkout_address_info_submitted",t=>{if(!checkout_address_info_submitted_fired){var e,a,d,c,i,r,o,n,s,u,p=contextData()||{},l={};if(null!==t.data.checkout){var h=t.data.checkout.lineItems,m=h.map(t=>{var e;return{item_id:t.variant.product.id,item_name:t.variant.product.title,item_brand:t.variant.product.vendor,item_category:t.variant.product.type,item_variant_id:t.variant.id,item_sku:t.variant.sku,item_variant:t.variant.title?t.variant.title:"",price:t.variant.price.amount,coupon:t.discountAllocations.length>0?t.discountAllocations[0].discountApplication.title:"",quantity:t.quantity}});o=h.map(t=>{var e;return{product_id:t.variant.product.id,product_name:t.variant.product.title,product_variant_id:t.variant.id,product_brand:t.variant.product.vendor?t.variant.product.vendor:"",product_category:t.variant.product.type,product_price:t.variant.price.amount,product_quantity:t.quantity}}),u=h.map(t=>void 0===t.variant.sku?"":t.variant.sku),s=h.map(t=>t.variant.id),a=h.map(t=>t.variant.product.id),d=h.map(t=>t.variant.product.type).includes("")?"":h.map(t=>t.variant.product.type).join(),n=h.map(t=>t.variant.product.vendor?t.variant.product.vendor:"").includes("")?"":h.map(t=>t.variant.product.vendor),c=h.map(t=>t.variant.product.title).join(),i=h.map(t=>{var e;return{id:t.variant.product.id,quantity:t.quantity,item_price:t.variant.price.amount}}),r=h.reduce((t,e)=>t+=e.quantity,0),l.currency=t.data.checkout.currencyCode,l.value=t.data.checkout.totalPrice.amount,l.coupon=t.data.checkout.discountApplications.length>0?t.data.checkout.discountApplications[0].title:"",l.items=m}
e={event:"sld_checkout_address_info_submitted",client_id:t.clientId,event_time:t.timestamp,event_time_seconds:Math.round(new Date(t.timestamp)/1e3),event_source:"custom_pixel",product_variant_id:s,product_sku:u,itemTotalQuantity:r,total_tax:t.data.checkout.totalTax.amount,subTotal_price:t.data.checkout.subtotalPrice.amount,shipping:t.data.checkout.shippingLine.price.amount?t.data.checkout.shippingLine.price.amount:"",transaction_id:t.data.checkout.order.id?t.data.checkout.order.id:"",email:t.data.checkout.email?t.data.checkout.email:"",phone:t.data.checkout.phone?t.data.checkout.phone:"",customer_address_Line1:t.data.checkout.shippingAddress.address1?t.data.checkout.shippingAddress.address1:t.data.checkout.billingAddress.address1,customer_address_Line2:t.data.checkout.shippingAddress.address2?t.data.checkout.shippingAddress.address2:t.data.checkout.billingAddress.address2,customer_city:t.data.checkout.shippingAddress.city?t.data.checkout.shippingAddress.city:t.data.checkout.billingAddress.city,customer_country:t.data.checkout.shippingAddress.country?t.data.checkout.shippingAddress.country:t.data.checkout.billingAddress.country,customer_countryCode:t.data.checkout.shippingAddress.countryCode?t.data.checkout.shippingAddress.countryCode:t.data.checkout.billingAddress.countryCode,customer_firstName:t.data.checkout.shippingAddress.firstName?t.data.checkout.shippingAddress.firstName:t.data.checkout.billingAddress.firstName,customer_lastName:t.data.checkout.shippingAddress.lastName?t.data.checkout.shippingAddress.lastName:t.data.checkout.billingAddress.lastName,customer_phoneNo:t.data.checkout.shippingAddress.phone?t.data.checkout.shippingAddress.phone:t.data.checkout.billingAddress.phone,customer_state:t.data.checkout.shippingAddress.province?t.data.checkout.shippingAddress.province:t.data.checkout.billingAddress.province,customer_stateCode:t.data.checkout.shippingAddress.provinceCode?t.data.checkout.shippingAddress.provinceCode:t.data.checkout.billingAddress.provinceCode,customer_zip:t.data.checkout.shippingAddress.zip?t.data.checkout.shippingAddress.zip:t.data.checkout.billingAddress.zip,ecommerce:l},trackingPlatform.filter(t=>t.toLowerCase().includes("facebook")).length>0&&(e.fb_browser_side={content_ids:a,content_category:d,content_name:c,content_type:"product",contents:i,currency:t.data.checkout.currencyCode,value:t.data.checkout.totalPrice.amount,num_items:r}),trackingPlatform.filter(t=>t.toLowerCase().includes("pinterest")).length>0&&(e.pt_browser_side={value:t.data.checkout.totalPrice.amount,order_quantity:r,currency:t.data.checkout.currencyCode,line_items:o}),trackingPlatform.filter(t=>t.toLowerCase().includes("snapchat")).length>0&&(e.snap_browser_side={price:t.data.checkout.totalPrice.amount,currency:t.data.checkout.currencyCode,item_ids:a,item_category:d,brands:n,number_items:r,payment_info_available:1}),dataLayer.push({ecommerce:null,pt_browser_side:null,snap_browser_side:null,fb_browser_side:null}),window.dataLayer.push({...e,...p})}
checkout_address_info_submitted_fired=!0}),analytics.subscribe("checkout_shipping_info_submitted",t=>{if(!checkout_shipping_info_submitted_fired){var e,a,d,c,i,r,o,n,s,u,p=contextData()||{},l={};if(null!==t.data.checkout){var h=t.data.checkout.lineItems,m=h.map(t=>{var e;return{item_id:t.variant.product.id,item_name:t.variant.product.title,item_brand:t.variant.product.vendor,item_category:t.variant.product.type,item_variant_id:t.variant.id,item_sku:t.variant.sku,item_variant:t.variant.title?t.variant.title:"",price:t.variant.price.amount,coupon:t.discountAllocations.length>0?t.discountAllocations[0].discountApplication.title:"",quantity:t.quantity}});o=h.map(t=>{var e;return{product_id:t.variant.product.id,product_name:t.variant.product.title,product_variant_id:t.variant.id,product_brand:t.variant.product.vendor?t.variant.product.vendor:"",product_category:t.variant.product.type,product_price:t.variant.price.amount,product_quantity:t.quantity}}),u=h.map(t=>void 0===t.variant.sku?"":t.variant.sku),s=h.map(t=>t.variant.id),a=h.map(t=>t.variant.product.id),d=h.map(t=>t.variant.product.type).includes("")?"":h.map(t=>t.variant.product.type).join(),n=h.map(t=>t.variant.product.vendor?t.variant.product.vendor:"").includes("")?"":h.map(t=>t.variant.product.vendor),c=h.map(t=>t.variant.product.title).join(),i=h.map(t=>{var e;return{id:t.variant.product.id,quantity:t.quantity,item_price:t.variant.price.amount}}),r=h.reduce((t,e)=>t+=e.quantity,0),l.currency=t.data.checkout.currencyCode,l.value=t.data.checkout.totalPrice.amount,l.coupon=t.data.checkout.discountApplications.length>0?t.data.checkout.discountApplications[0].title:"",l.items=m}
e={event:"sld_add_shipping_info",client_id:t.clientId,event_time:t.timestamp,event_time_seconds:Math.round(new Date(t.timestamp)/1e3),event_source:"custom_pixel",product_variant_id:s,product_sku:u,itemTotalQuantity:r,total_tax:t.data.checkout.totalTax.amount,subTotal_price:t.data.checkout.subtotalPrice.amount,shipping:t.data.checkout.shippingLine.price.amount?t.data.checkout.shippingLine.price.amount:"",transaction_id:t.data.checkout.order.id?t.data.checkout.order.id:"",email:t.data.checkout.email?t.data.checkout.email:"",phone:t.data.checkout.phone?t.data.checkout.phone:"",customer_address_Line1:t.data.checkout.shippingAddress.address1?t.data.checkout.shippingAddress.address1:t.data.checkout.billingAddress.address1,customer_address_Line2:t.data.checkout.shippingAddress.address2?t.data.checkout.shippingAddress.address2:t.data.checkout.billingAddress.address2,customer_city:t.data.checkout.shippingAddress.city?t.data.checkout.shippingAddress.city:t.data.checkout.billingAddress.city,customer_country:t.data.checkout.shippingAddress.country?t.data.checkout.shippingAddress.country:t.data.checkout.billingAddress.country,customer_countryCode:t.data.checkout.shippingAddress.countryCode?t.data.checkout.shippingAddress.countryCode:t.data.checkout.billingAddress.countryCode,customer_firstName:t.data.checkout.shippingAddress.firstName?t.data.checkout.shippingAddress.firstName:t.data.checkout.billingAddress.firstName,customer_lastName:t.data.checkout.shippingAddress.lastName?t.data.checkout.shippingAddress.lastName:t.data.checkout.billingAddress.lastName,customer_phoneNo:t.data.checkout.shippingAddress.phone?t.data.checkout.shippingAddress.phone:t.data.checkout.billingAddress.phone,customer_state:t.data.checkout.shippingAddress.province?t.data.checkout.shippingAddress.province:t.data.checkout.billingAddress.province,customer_stateCode:t.data.checkout.shippingAddress.provinceCode?t.data.checkout.shippingAddress.provinceCode:t.data.checkout.billingAddress.provinceCode,customer_zip:t.data.checkout.shippingAddress.zip?t.data.checkout.shippingAddress.zip:t.data.checkout.billingAddress.zip,ecommerce:l},trackingPlatform.filter(t=>t.toLowerCase().includes("facebook")).length>0&&(e.fb_browser_side={content_ids:a,content_category:d,content_name:c,content_type:"product",contents:i,currency:t.data.checkout.currencyCode,value:t.data.checkout.totalPrice.amount,num_items:r}),trackingPlatform.filter(t=>t.toLowerCase().includes("pinterest")).length>0&&(e.pt_browser_side={value:t.data.checkout.totalPrice.amount,order_quantity:r,currency:t.data.checkout.currencyCode,line_items:o}),trackingPlatform.filter(t=>t.toLowerCase().includes("snapchat")).length>0&&(e.snap_browser_side={price:t.data.checkout.totalPrice.amount,currency:t.data.checkout.currencyCode,item_ids:a,item_category:d,brands:n,number_items:r,payment_info_available:1}),dataLayer.push({ecommerce:null,pt_browser_side:null,snap_browser_side:null,fb_browser_side:null}),window.dataLayer.push({...e,...p})}
checkout_shipping_info_submitted_fired=!0}),analytics.subscribe("payment_info_submitted",t=>{var e,a,d,c,i,r,o,n,s,u,p=contextData()||{},l={};if(null!==t.data.checkout){var h=t.data.checkout.lineItems,m=h.map(t=>{var e;return{item_id:t.variant.product.id,item_name:t.variant.product.title,item_brand:t.variant.product.vendor,item_category:t.variant.product.type,item_variant_id:t.variant.id,item_sku:t.variant.sku,item_variant:t.variant.title?t.variant.title:"",price:t.variant.price.amount,coupon:t.discountAllocations.length>0?t.discountAllocations[0].discountApplication.title:"",quantity:t.quantity}});o=h.map(t=>{var e;return{product_id:t.variant.product.id,product_name:t.variant.product.title,product_variant_id:t.variant.id,product_brand:t.variant.product.vendor?t.variant.product.vendor:"",product_category:t.variant.product.type,product_price:t.variant.price.amount,product_quantity:t.quantity}}),u=h.map(t=>void 0===t.variant.sku?"":t.variant.sku),s=h.map(t=>t.variant.id),a=h.map(t=>t.variant.product.id),d=h.map(t=>t.variant.product.type).includes("")?"":h.map(t=>t.variant.product.type).join(),n=h.map(t=>t.variant.product.vendor?t.variant.product.vendor:"").includes("")?"":h.map(t=>t.variant.product.vendor),c=h.map(t=>t.variant.product.title).join(),i=h.map(t=>{var e;return{id:t.variant.product.id,quantity:t.quantity,item_price:t.variant.price.amount}}),r=h.reduce((t,e)=>t+=e.quantity,0),l.currency=t.data.checkout.currencyCode,l.value=t.data.checkout.totalPrice.amount,l.coupon=t.data.checkout.discountApplications.length>0?t.data.checkout.discountApplications[0].title:"",l.items=m}
e={event:"sld_add_payment_info",client_id:t.clientId,event_time:t.timestamp,event_time_seconds:Math.round(new Date(t.timestamp)/1e3),event_source:"custom_pixel",product_variant_id:s,product_sku:u,itemTotalQuantity:r,total_tax:t.data.checkout.totalTax.amount,subTotal_price:t.data.checkout.subtotalPrice.amount,shipping:t.data.checkout.shippingLine.price.amount?t.data.checkout.shippingLine.price.amount:"",transaction_id:t.data.checkout.order.id?t.data.checkout.order.id:"",email:t.data.checkout.email?t.data.checkout.email:"",phone:t.data.checkout.phone?t.data.checkout.phone:"",customer_address_Line1:t.data.checkout.shippingAddress.address1?t.data.checkout.shippingAddress.address1:t.data.checkout.billingAddress.address1,customer_address_Line2:t.data.checkout.shippingAddress.address2?t.data.checkout.shippingAddress.address2:t.data.checkout.billingAddress.address2,customer_city:t.data.checkout.shippingAddress.city?t.data.checkout.shippingAddress.city:t.data.checkout.billingAddress.city,customer_country:t.data.checkout.shippingAddress.country?t.data.checkout.shippingAddress.country:t.data.checkout.billingAddress.country,customer_countryCode:t.data.checkout.shippingAddress.countryCode?t.data.checkout.shippingAddress.countryCode:t.data.checkout.billingAddress.countryCode,customer_firstName:t.data.checkout.shippingAddress.firstName?t.data.checkout.shippingAddress.firstName:t.data.checkout.billingAddress.firstName,customer_lastName:t.data.checkout.shippingAddress.lastName?t.data.checkout.shippingAddress.lastName:t.data.checkout.billingAddress.lastName,customer_phoneNo:t.data.checkout.shippingAddress.phone?t.data.checkout.shippingAddress.phone:t.data.checkout.billingAddress.phone,customer_state:t.data.checkout.shippingAddress.province?t.data.checkout.shippingAddress.province:t.data.checkout.billingAddress.province,customer_stateCode:t.data.checkout.shippingAddress.provinceCode?t.data.checkout.shippingAddress.provinceCode:t.data.checkout.billingAddress.provinceCode,customer_zip:t.data.checkout.shippingAddress.zip?t.data.checkout.shippingAddress.zip:t.data.checkout.billingAddress.zip,ecommerce:l},trackingPlatform.filter(t=>t.toLowerCase().includes("facebook")).length>0&&(e.fb_browser_side={content_ids:a,content_category:d,content_name:c,content_type:"product",contents:i,currency:t.data.checkout.currencyCode,value:t.data.checkout.totalPrice.amount,num_items:r}),trackingPlatform.filter(t=>t.toLowerCase().includes("pinterest")).length>0&&(e.pt_browser_side={value:t.data.checkout.totalPrice.amount,order_quantity:r,currency:t.data.checkout.currencyCode,line_items:o}),trackingPlatform.filter(t=>t.toLowerCase().includes("snapchat")).length>0&&(e.snap_browser_side={price:t.data.checkout.totalPrice.amount,currency:t.data.checkout.currencyCode,item_ids:a,item_category:d,brands:n,number_items:r,payment_info_available:1}),dataLayer.push({ecommerce:null,pt_browser_side:null,snap_browser_side:null,fb_browser_side:null}),window.dataLayer.push({...e,...p})}),analytics.subscribe("checkout_completed",t=>{var e,a,d,c,i,r,o,n,s,u,p=contextData()||{},l={};if(null!==t.data.checkout){var h=t.data.checkout.lineItems,m=h.map(t=>{var e;return{item_id:t.variant.product.id,item_name:t.variant.product.title,item_brand:t.variant.product.vendor,item_category:t.variant.product.type,item_variant_id:t.variant.id,item_sku:t.variant.sku,item_variant:t.variant.title?t.variant.title:"",price:t.variant.price.amount,coupon:t.discountAllocations.length>0?t.discountAllocations[0].discountApplication.title:"",quantity:t.quantity}});o=h.map(t=>{var e;return{product_id:t.variant.product.id,product_name:t.variant.product.title,product_variant_id:t.variant.id,product_brand:t.variant.product.vendor?t.variant.product.vendor:"",product_category:t.variant.product.type,product_price:t.variant.price.amount,product_quantity:t.quantity}}),u=h.map(t=>void 0===t.variant.sku?"":t.variant.sku),s=h.map(t=>t.variant.id),a=h.map(t=>t.variant.product.id),d=h.map(t=>t.variant.product.type).includes("")?"":h.map(t=>t.variant.product.type).join(),n=h.map(t=>t.variant.product.vendor?t.variant.product.vendor:"").includes("")?"":h.map(t=>t.variant.product.vendor),c=h.map(t=>t.variant.product.title).join(),i=h.map(t=>{var e;return{id:t.variant.product.id,quantity:t.quantity,item_price:t.variant.price.amount}}),r=h.reduce((t,e)=>t+=e.quantity,0),l.currency=t.data.checkout.currencyCode,l.value=t.data.checkout.totalPrice.amount,l.tax=t.data.checkout.totalTax.amount,l.coupon=t.data.checkout.discountApplications.length>0?t.data.checkout.discountApplications[0].title:"",l.shipping=t.data.checkout.shippingLine.price.amount?t.data.checkout.shippingLine.price.amount:"",l.transaction_id=t.data.checkout.order.id?t.data.checkout.order.id.split("/").pop():"",l.items=m}
e={event:"sld_purchase",client_id:t.clientId,event_time:t.timestamp,event_time_seconds:Math.round(new Date(t.timestamp)/1e3),event_source:"custom_pixel",itemTotalQuantity:r,subTotal_price:t.data.checkout.subtotalPrice.amount,product_variant_id:s,product_sku:u,payment_gateway:t.data.checkout.transactions.length>0?t.data.checkout.transactions[0].gateway:"",customer_id:t.data.checkout.order.customer.id?t.data.checkout.order.customer.id:"",customer_type:true===t.data.checkout.order.customer.isFirstOrder?"New":"Existing",email:t.data.checkout.email?t.data.checkout.email:"",phone:t.data.checkout.phone?t.data.checkout.phone:"",customer_address_Line1:null===t.data.checkout.shippingAddress||void 0===t.data.checkout.shippingAddress?null===t.data.checkout.billingAddress||void 0===t.data.checkout.billingAddress?"":null===t.data.checkout.billingAddress.address1||void 0===t.data.checkout.billingAddress.address1?"":t.data.checkout.billingAddress.address1:null===t.data.checkout.shippingAddress.address1||void 0===t.data.checkout.shippingAddress.address1?"":t.data.checkout.shippingAddress.address1,customer_address_Line2:null===t.data.checkout.shippingAddress||void 0===t.data.checkout.shippingAddress?null===t.data.checkout.billingAddress||void 0===t.data.checkout.billingAddress?"":null===t.data.checkout.billingAddress.address2||void 0===t.data.checkout.billingAddress.address2?"":t.data.checkout.billingAddress.address2:null===t.data.checkout.shippingAddress.address2||void 0===t.data.checkout.shippingAddress.address2?"":t.data.checkout.shippingAddress.address2,customer_city:null===t.data.checkout.billingAddress||void 0===t.data.checkout.billingAddress?null===t.data.checkout.shippingAddress||void 0===t.data.checkout.shippingAddress?"":null===t.data.checkout.shippingAddress.city||void 0===t.data.checkout.shippingAddress.city?"":t.data.checkout.shippingAddress.city:null===t.data.checkout.billingAddress.city||void 0===t.data.checkout.billingAddress.city?"":t.data.checkout.billingAddress.city,customer_country:null===t.data.checkout.billingAddress||void 0===t.data.checkout.billingAddress?null===t.data.checkout.shippingAddress||void 0===t.data.checkout.shippingAddress?"":null===t.data.checkout.shippingAddress.country||void 0===t.data.checkout.shippingAddress.country?"":t.data.checkout.shippingAddress.country:null===t.data.checkout.billingAddress.country||void 0===t.data.checkout.billingAddress.country?"":t.data.checkout.billingAddress.country,customer_countryCode:null===t.data.checkout.billingAddress||void 0===t.data.checkout.billingAddress?null===t.data.checkout.shippingAddress||void 0===t.data.checkout.shippingAddress?"":null===t.data.checkout.shippingAddress.countryCode||void 0===t.data.checkout.shippingAddress.countryCode?"":t.data.checkout.shippingAddress.countryCode:null===t.data.checkout.billingAddress.countryCode||void 0===t.data.checkout.billingAddress.countryCode?"":t.data.checkout.billingAddress.countryCode,customer_firstName:null===t.data.checkout.billingAddress||void 0===t.data.checkout.billingAddress?null===t.data.checkout.shippingAddress||void 0===t.data.checkout.shippingAddress?"":null===t.data.checkout.shippingAddress.firstName||void 0===t.data.checkout.shippingAddress.firstName?"":t.data.checkout.shippingAddress.firstName:null===t.data.checkout.billingAddress.firstName||void 0===t.data.checkout.billingAddress.firstName?"":t.data.checkout.billingAddress.firstName,customer_lastName:null===t.data.checkout.billingAddress||void 0===t.data.checkout.billingAddress?null===t.data.checkout.shippingAddress||void 0===t.data.checkout.shippingAddress?"":null===t.data.checkout.shippingAddress.lastName||void 0===t.data.checkout.shippingAddress.lastName?"":t.data.checkout.shippingAddress.lastName:null===t.data.checkout.billingAddress.lastName||void 0===t.data.checkout.billingAddress.lastName?"":t.data.checkout.billingAddress.lastName,customer_phoneNo:null===t.data.checkout.billingAddress||void 0===t.data.checkout.billingAddress?null===t.data.checkout.shippingAddress||void 0===t.data.checkout.shippingAddress?"":null===t.data.checkout.shippingAddress.phone||void 0===t.data.checkout.shippingAddress.phone?"":t.data.checkout.shippingAddress.phone:null===t.data.checkout.billingAddress.phone||void 0===t.data.checkout.billingAddress.phone?"":t.data.checkout.billingAddress.phone,customer_state:null===t.data.checkout.billingAddress||void 0===t.data.checkout.billingAddress?null===t.data.checkout.shippingAddress||void 0===t.data.checkout.shippingAddress?"":null===t.data.checkout.shippingAddress.province||void 0===t.data.checkout.shippingAddress.province?"":t.data.checkout.shippingAddress.province:null===t.data.checkout.billingAddress.province||void 0===t.data.checkout.billingAddress.province?"":t.data.checkout.billingAddress.province,customer_stateCode:null===t.data.checkout.billingAddress||void 0===t.data.checkout.billingAddress?null===t.data.checkout.shippingAddress||void 0===t.data.checkout.shippingAddress?"":null===t.data.checkout.shippingAddress.provinceCode||void 0===t.data.checkout.shippingAddress.provinceCode?"":t.data.checkout.shippingAddress.provinceCode:null===t.data.checkout.billingAddress.provinceCode||void 0===t.data.checkout.billingAddress.provinceCode?"":t.data.checkout.billingAddress.provinceCode,customer_zip:null===t.data.checkout.billingAddress||void 0===t.data.checkout.billingAddress?null===t.data.checkout.shippingAddress||void 0===t.data.checkout.shippingAddress?"":null===t.data.checkout.shippingAddress.zip||void 0===t.data.checkout.shippingAddress.zip?"":t.data.checkout.shippingAddress.zip:null===t.data.checkout.billingAddress.zip||void 0===t.data.checkout.billingAddress.zip?"":t.data.checkout.billingAddress.zip,ecommerce:l},trackingPlatform.filter(t=>t.toLowerCase().includes("facebook")).length>0&&(e.fb_browser_side={content_ids:a,content_category:d,content_name:c,content_type:"product",contents:i,currency:t.data.checkout.currencyCode,value:t.data.checkout.totalPrice.amount,num_items:r}),trackingPlatform.filter(t=>t.toLowerCase().includes("pinterest")).length>0&&(e.pt_browser_side={value:t.data.checkout.totalPrice.amount,order_quantity:r,currency:t.data.checkout.currencyCode,order_id:t.data.checkout.order.id?t.data.checkout.order.id.split("/").pop():"",promo_code:t.data.checkout.discountApplications.length>0?t.data.checkout.discountApplications[0].title:"",line_items:o}),trackingPlatform.filter(t=>t.toLowerCase().includes("snapchat")).length>0&&(e.snap_browser_side={price:t.data.checkout.totalPrice.amount,currency:t.data.checkout.currencyCode,item_ids:a,item_category:d,brands:n,number_items:r,transaction_id:t.data.checkout.order.id?t.data.checkout.order.id.split("/").pop():""}),dataLayer.push({ecommerce:null,pt_browser_side:null,snap_browser_side:null,fb_browser_side:null}),window.dataLayer.push({...e,...p,page_location:t.context.document.location.href,page_referrer:t.context.document.referrer,page_title:t.context.document.title,page_path:t.context.document.location.pathname,search_param:t.context.document.location.search,hash_param:t.context.document.location.hash})}),analytics.subscribe("search_submitted",t=>{var e,a,d,c,i=contextData()||{},r={},o=t.data.searchResult.productVariants;o.length>0&&(a=o.map(t=>{var e;return{item_id:t.product.id,item_name:t.product.title,item_brand:t.product.vendor,item_category:t.product.type,item_variant_id:t.id,item_sku:t.sku,item_variant:t.title?t.title:"",price:t.price.amount,quantity:1}})),r.value=o.reduce((t,e)=>t+=e.price.amount,0),r.items=a,d=o.map(t=>t.id),c=o.map(t=>t.sku),e={event:"sld_search",client_id:t.clientId,event_time:t.timestamp,event_time_seconds:Math.round(new Date(t.timestamp)/1e3),event_source:"custom_pixel",search_term:t.data.searchResult.query},trackingPlatform.filter(t=>t.toLowerCase().includes("facebook")).length>0&&(e.fb_browser_side={search_string:t.data.searchResult.query}),trackingPlatform.filter(t=>t.toLowerCase().includes("pinterest")).length>0&&(e.pt_browser_side={search_query:t.data.searchResult.query}),trackingPlatform.filter(t=>t.toLowerCase().includes("snapchat")).length>0&&(e.snap_browser_side={search_string:t.data.searchResult.query}),dataLayer.push({ecommerce:null,pt_browser_side:null,snap_browser_side:null,fb_browser_side:null}),window.dataLayer.push({...e,...i}),window.dataLayer.push({event:"sld_view_search_results",client_id:t.clientId,page_location:t.context.document.location.href,page_referrer:t.context.document.referrer,page_title:t.context.document.title,page_path:t.context.document.location.pathname,search_param:t.context.document.location.search,hash_param:t.context.document.location.hash,language:t.context.navigator.language,screen_width:t.context.window.outerWidth,screen_height:t.context.window.outerHeight,user_agent:t.context.navigator.userAgent,event_time:t.timestamp,event_time_seconds:Math.floor(new Date(t.timestamp)/1e3),product_variant_id:d,product_sku:c,event_source:"custom_pixel",search_term:t.data.searchResult.query,ecommerce:r})}),analytics.subscribe("collection_viewed",t=>{var e,a,d,c,i,r,o,n,s,u=contextData()||{},p={},l=t.data.collection.productVariants;l.length>0&&(r=l.map(t=>{var e;return{item_id:t.product.id,item_name:t.product.title,item_brand:t.product.vendor,item_category:t.product.type,item_variant_id:t.id,item_sku:t.sku,item_variant:t.title?t.title:"",price:t.price.amount,quantity:1}}),s=l.map(t=>{var e;return{product_id:t.product.id,product_name:t.product.title,product_variant_id:t.id,product_brand:t.product.vendor?t.product.vendor:"",product_category:t.product.type,product_price:t.price.amount,product_quantity:1}}),o=l.map(t=>t.id),n=l.map(t=>t.sku),a=l.map(t=>t.product.id),d=l.map(t=>t.product.type).includes("")?"":l.map(t=>t.product.type).join(),c=l.map(t=>t.product.title).join(),i=l.map(t=>{var e;return{id:t.product.id,quantity:1,item_price:t.price.amount}}),p.item_list_id=t.data.collection.id,p.item_list_name=t.data.collection.title,p.items=r),e={event:"sld_view_item_list",client_id:t.clientId,event_time:t.timestamp,event_time_seconds:Math.round(new Date(t.timestamp)/1e3),event_source:"custom_pixel",product_variant_id:o,product_sku:n,ecommerce:p},trackingPlatform.filter(t=>t.toLowerCase().includes("facebook")).length>0&&(e.fb_browser_side={content_ids:a,content_category:d,content_name:c,content_type:"product",contents:i}),trackingPlatform.filter(t=>t.toLowerCase().includes("pinterest")).length>0&&(e.pt_browser_side={line_items:s}),trackingPlatform.filter(t=>t.toLowerCase().includes("snapchat")).length>0&&(e.snap_browser_side={item_list_id:t.data.collection.id,item_list_name:t.data.collection.title,item_ids:a}),dataLayer.push({ecommerce:null,pt_browser_side:null,snap_browser_side:null,fb_browser_side:null}),window.dataLayer.push({...e,...u})}),analytics.subscribe("form_submitted",t=>{var e=contextData()||{},a={event:"sld_form_submit",client_id:t.clientId,event_time:t.timestamp,event_time_seconds:Math.round(new Date(t.timestamp)/1e3),event_source:"custom_pixel",id:t.data.element.id?t.data.element.id:void 0,action:t.data.element.action?t.data.element.action:void 0,elements:t.data.element.elements?t.data.element.elements:void 0};dataLayer.push({ecommerce:null,pt_browser_side:null,snap_browser_side:null,fb_browser_side:null}),window.dataLayer.push({...a,...e})});
